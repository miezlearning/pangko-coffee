<!DOCTYPE html>
<html lang="id">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>Pangko Coffee ¬∑ Webhook Tester</title>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
        <script src="https://cdn.tailwindcss.com"></script>
        <script>
            tailwind.config = {
                theme: {
                    extend: {
                        fontFamily: {
                            sans: ['Manrope', 'system-ui', 'sans-serif']
                        },
                        colors: {
                            matcha: '#74A662',
                            cream: '#FFFDD0',
                            charcoal: '#333333',
                            peach: '#FFE5B4'
                        },
                        boxShadow: {
                            glow: '0 35px 80px -45px rgba(116, 166, 98, 0.65)'
                        }
                    }
                }
            }
        </script>
    </head>
    <body class="min-h-screen bg-cream text-charcoal antialiased" data-page="webhook">
        <!-- Navbar will be injected here by navbar.js -->
        <div id="navbar-container"></div>

        <main class="mx-auto flex w-full max-w-[960px] flex-col gap-10 px-5 pt-32 pb-20">
            <header class="relative overflow-hidden rounded-3xl border border-white/40 bg-white/90 px-8 py-10 shadow-glow">
                <div class="pointer-events-none absolute -top-16 right-10 h-40 w-40 rounded-full bg-matcha/25 blur-3xl"></div>
                <div class="pointer-events-none absolute -bottom-20 left-5 h-48 w-48 rounded-full bg-peach/35 blur-3xl"></div>
                <div class="relative flex flex-col gap-5 md:flex-row md:items-center md:justify-between">
                    <div class="max-w-xl space-y-4">
                        <span class="inline-flex items-center gap-2 rounded-full bg-matcha/15 px-4 py-1 text-xs font-semibold uppercase tracking-[0.3em] text-matcha">Testing Mode</span>
                        <h1 class="text-3xl font-extrabold leading-tight md:text-4xl">Webhook Tester untuk Simulasi Pembayaran yang Aman</h1>
                        <p class="text-sm text-charcoal/65 md:text-base">
                            Jalankan simulasi notifikasi pembayaran selaras dengan Order Manager. Dengan satu klik kamu bisa memastikan alur konfirmasi customer & barista berjalan mulus‚Äîtanpa transaksi real.
                        </p>
                    </div>
                    <div class="w-full max-w-[240px] rounded-2xl border border-matcha/20 bg-matcha/10 px-5 py-6 text-sm font-semibold text-matcha">
                        <p class="text-xs uppercase tracking-[0.25em] text-matcha/80">Snapshot</p>
                        <div class="mt-3 space-y-3 text-charcoal">
                            <p class="flex items-center justify-between text-sm"><span>Auto refresh</span><span class="font-bold">10 detik</span></p>
                            <p class="flex items-center justify-between text-sm"><span>Target</span><span class="font-bold">Pending orders</span></p>
                            <p class="flex items-center justify-between text-sm"><span>Output</span><span class="font-bold">Webhook JSON</span></p>
                        </div>
                    </div>
                </div>
            </header>

            <section class="grid gap-8 lg:grid-cols-[0.9fr_1.1fr]">
                <aside class="rounded-3xl border border-white/40 bg-white/85 px-6 py-7 shadow-[0_20px_50px_-38px_rgba(116,166,98,0.45)] backdrop-blur">
                    <div class="flex items-center justify-between">
                        <h2 class="text-lg font-semibold">Pending Orders</h2>
                        <button onclick="loadPendingOrders()" class="inline-flex items-center gap-2 rounded-full border border-matcha/40 px-4 py-2 text-xs font-semibold text-matcha transition hover:bg-matcha hover:text-white">üîÑ Refresh</button>
                    </div>
                    <p class="mt-2 text-xs text-charcoal/55">Pilih order untuk auto-fill data webhook.</p>
                    <div id="pending-orders" class="mt-5 space-y-3 text-sm">
                        <p class="text-charcoal/40">Loading...</p>
                    </div>
                </aside>

                <div class="rounded-3xl border border-white/40 bg-white/90 px-6 py-7 shadow-[0_20px_55px_-38px_rgba(255,229,180,0.55)] backdrop-blur">
                    <div class="flex items-center justify-between gap-3 border-b border-white/60 pb-5">
                        <div>
                            <h2 class="text-lg font-semibold">Form Webhook Simulation</h2>
                            <p class="text-xs text-charcoal/55">Lengkapi data sesuai order untuk kirim payload.</p>
                        </div>
                        <span class="rounded-full bg-rose-100 px-3 py-1 text-[10px] font-semibold uppercase tracking-[0.28em] text-rose-600">Testing Only</span>
                    </div>
                    <div class="mt-6 grid gap-5 md:grid-cols-2">
                        <label class="flex flex-col gap-2 text-xs font-semibold uppercase tracking-[0.22em] text-charcoal/50">
                            Order ID
                            <input id="orderId" type="text" placeholder="CF123456" required class="rounded-2xl border border-charcoal/10 bg-white px-4 py-3 text-sm font-semibold text-charcoal outline-none transition focus:border-matcha focus:ring-2 focus:ring-matcha/30" />
                        </label>
                        <label class="flex flex-col gap-2 text-xs font-semibold uppercase tracking-[0.22em] text-charcoal/50">
                            Payment Status
                            <select id="status" class="rounded-2xl border border-charcoal/10 bg-white px-4 py-3 text-sm font-semibold text-charcoal outline-none transition focus:border-matcha focus:ring-2 focus:ring-matcha/30">
                                <option value="success">‚úÖ Success (Paid)</option>
                                <option value="settlement">‚úÖ Settlement (Confirmed)</option>
                                <option value="failed">‚ùå Failed</option>
                                <option value="expired">‚è∞ Expired</option>
                            </select>
                        </label>
                        <label class="flex flex-col gap-2 text-xs font-semibold uppercase tracking-[0.22em] text-charcoal/50">
                            Amount (Rp)
                            <input id="amount" type="number" placeholder="50000" required class="rounded-2xl border border-charcoal/10 bg-white px-4 py-3 text-sm font-semibold text-charcoal outline-none transition focus:border-matcha focus:ring-2 focus:ring-matcha/30" />
                        </label>
                        <label class="flex flex-col gap-2 text-xs font-semibold uppercase tracking-[0.22em] text-charcoal/50">
                            Provider / Gateway
                            <input id="provider" type="text" value="webhook-simulator" class="rounded-2xl border border-charcoal/10 bg-white px-4 py-3 text-sm font-semibold text-charcoal outline-none transition focus:border-matcha focus:ring-2 focus:ring-matcha/30" />
                        </label>
                    </div>
                    <div class="mt-6 space-y-3">
                        <button onclick="sendWebhook()" class="w-full rounded-2xl bg-matcha px-4 py-3 text-sm font-semibold text-white transition hover:-translate-y-0.5 hover:shadow-lg">
                            üöÄ Kirim Simulasi Webhook
                        </button>
                        <button onclick="loadPendingOrders()" class="w-full rounded-2xl border border-charcoal/15 px-4 py-3 text-sm font-semibold text-charcoal transition hover:bg-charcoal/5">
                            üîÑ Muat Ulang Pending Orders
                        </button>
                    </div>
                    <pre id="response" class="hidden whitespace-pre-wrap text-xs leading-relaxed text-charcoal/75 mt-6 rounded-2xl border border-charcoal/10 bg-charcoal/3 p-4"></pre>
                </div>
            </section>
        </main>

        <script>
            const shell = document.getElementById('nav-shell');
            function handleNavShadow() {
                if (window.scrollY > 6) {
                    shell.classList.add('shadow-[0_25px_60px_-35px_rgba(51,51,51,0.25)]','bg-white/85');
                } else {
                    shell.classList.remove('shadow-[0_25px_60px_-35px_rgba(51,51,51,0.25)]','bg-white/85');
                }
            }
            window.addEventListener('scroll', handleNavShadow);
            handleNavShadow();
        </script>

        <script src="/js/navbar.js"></script>
        <script src="/js/webhookTester.js"></script>
    </body>
</html>
